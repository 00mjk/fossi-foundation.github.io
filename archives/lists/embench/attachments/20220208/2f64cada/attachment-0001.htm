<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Hi&nbsp;David,&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;thank&nbsp;you&nbsp;for&nbsp;your&nbsp;email&nbsp;and&nbsp;sorry&nbsp;for&nbsp;the&nbsp;delay.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:5C07640B-0901-4B20-AC13-55934593C4E9@g.hmc.edu&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;Hello!&nbsp;&nbsp;We’re&nbsp;new&nbsp;to&nbsp;embench&nbsp;and&nbsp;trying&nbsp;to&nbsp;bring&nbsp;it&nbsp;up&nbsp;on&nbsp;a&nbsp;RISC-V&nbsp;core&nbsp;we&nbsp;are&nbsp;designing&nbsp;at&nbsp;Harvey&nbsp;Mudd&nbsp;College.&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;sounds&nbsp;very&nbsp;interesting.&nbsp;You&nbsp;should&nbsp;join&nbsp;the&nbsp;zoom&nbsp;Embench&nbsp;call<br>
&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;the&nbsp;21st&nbsp;of&nbsp;February&nbsp;and&nbsp;meet&nbsp;the&nbsp;team.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:5C07640B-0901-4B20-AC13-55934593C4E9@g.hmc.edu&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;<br>
<br>
Is&nbsp;there&nbsp;documentation&nbsp;or&nbsp;an&nbsp;example&nbsp;script&nbsp;or&nbsp;Makefile&nbsp;of&nbsp;how&nbsp;to&nbsp;build&nbsp;embench&nbsp;for&nbsp;RISC-V?&nbsp;&nbsp;We’d&nbsp;really&nbsp;like&nbsp;an&nbsp;example&nbsp;command&nbsp;that&nbsp;works&nbsp;out&nbsp;of&nbsp;the&nbsp;box,&nbsp;and&nbsp;also&nbsp;demonstrates&nbsp;eliminating&nbsp;library&nbsp;code&nbsp;and&nbsp;using&nbsp;preferred&nbsp;optimization&nbsp;flags,&nbsp;so&nbsp;we&nbsp;know&nbsp;we&nbsp;are&nbsp;benchmarking&nbsp;consistently&nbsp;with&nbsp;other&nbsp;reported&nbsp;results.<br>
<br>
We&nbsp;cloned&nbsp;the&nbsp;embench-iot&nbsp;repo&nbsp;and&nbsp;are&nbsp;attempting&nbsp;to&nbsp;build&nbsp;with:<br>
<br>
./build_all.py&nbsp;--arch&nbsp;riscv32&nbsp;--chip&nbsp;generic&nbsp;--board&nbsp;ri5cyverilator&nbsp;--cc&nbsp;riscv64-unknown-elf-gcc<br>
<br>
We&nbsp;get&nbsp;a&nbsp;bunch&nbsp;of&nbsp;undefined&nbsp;references&nbsp;listed&nbsp;below.&nbsp;&nbsp;It&nbsp;looks&nbsp;like&nbsp;it&nbsp;might&nbsp;be&nbsp;prematurely&nbsp;trying&nbsp;to&nbsp;link.<br>
<br>
We&nbsp;tried&nbsp;adding&nbsp;some&nbsp;cflags&nbsp;shown&nbsp;below,&nbsp;and&nbsp;many&nbsp;of&nbsp;the&nbsp;benchmarks&nbsp;now&nbsp;build,&nbsp;but&nbsp;cubic,&nbsp;nbody,&nbsp;and&nbsp;st&nbsp;fail&nbsp;missing&nbsp;some&nbsp;math&nbsp;functions.&nbsp;&nbsp;We&nbsp;tried&nbsp;adding&nbsp;--ldflags&nbsp;“-lm”&nbsp;but&nbsp;got&nbsp;error&nbsp;messages&nbsp;from&nbsp;build_all.<br>
<br>
./build_all.py&nbsp;--arch&nbsp;riscv32&nbsp;--chip&nbsp;generic&nbsp;--board&nbsp;ri5cyverilator&nbsp;--cflags&nbsp;“-O2&nbsp;-nostartfiles&nbsp;-c”&nbsp;--cc&nbsp;riscv64-unknown-elf-gcc&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Generally&nbsp;yes&nbsp;that's&nbsp;the&nbsp;way&nbsp;we&nbsp;call&nbsp;the&nbsp;script.&nbsp;Only&nbsp;we&nbsp;include<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;libraries&nbsp;(e.g.&nbsp;-lm)&nbsp;with&nbsp;--user-libs=&quot;-lm&quot;,&nbsp;not&nbsp;--ldflags.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;This&nbsp;shouldn't&nbsp;be&nbsp;a&nbsp;problem&nbsp;but&nbsp;we&nbsp;are&nbsp;well&nbsp;aware&nbsp;that&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scripts&nbsp;aren't&nbsp;perfect&nbsp;yet,&nbsp;and&nbsp;there's&nbsp;ongoing&nbsp;work&nbsp;to&nbsp;improve<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;them.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;As&nbsp;an&nbsp;example&nbsp;here&nbsp;is&nbsp;a&nbsp;command&nbsp;line&nbsp;used&nbsp;to&nbsp;generate&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseline&nbsp;results:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;./build_all.py&nbsp;--arch&nbsp;riscv32&nbsp;--chip&nbsp;generic&nbsp;--board&nbsp;ri5cyverilator&nbsp;--cc&nbsp;riscv32-unknown-elf-gcc&nbsp;--cflags=&quot;-c&nbsp;-O2&nbsp;-ffunction-sections&nbsp;-march=rv32imc&nbsp;-mabi=ilp32&quot;&nbsp;--ldflags=&quot;-Wl,-gc-sections&quot;&nbsp;--user-libs=&quot;-lm&quot;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;As&nbsp;you&nbsp;can&nbsp;notice&nbsp;I&nbsp;put&nbsp;&quot;=&quot;&nbsp;to&nbsp;initialize&nbsp;--user-libs&nbsp;as&nbsp;you&nbsp;need<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;do&nbsp;with&nbsp;these&nbsp;arguments&nbsp;if&nbsp;you&nbsp;provide&nbsp;only&nbsp;one&nbsp;value&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quotes.&nbsp;You'd&nbsp;see&nbsp;the&nbsp;same&nbsp;errors&nbsp;if&nbsp;for&nbsp;instance&nbsp;you&nbsp;did&nbsp;--cflags<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;-c&quot;.&nbsp;The&nbsp;reason&nbsp;is&nbsp;in&nbsp;how&nbsp;the&nbsp;arguments&nbsp;are&nbsp;parsed.&nbsp;Detail&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;needs&nbsp;to&nbsp;be&nbsp;fixed.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Thanks&nbsp;for&nbsp;the&nbsp;input&nbsp;anyway,&nbsp;we&nbsp;always&nbsp;welcome&nbsp;active&nbsp;users&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contributors.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Feel&nbsp;free&nbsp;to&nbsp;join&nbsp;the&nbsp;call&nbsp;on&nbsp;the&nbsp;21st&nbsp;4pm&nbsp;UTC&nbsp;if&nbsp;you&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;available.&nbsp;Here&nbsp;are&nbsp;the&nbsp;details:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Join&nbsp;Zoom&nbsp;Meeting<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://us02web.zoom.us/j/557006550?pwd=eTFJNWszZDZhMGRwOCs4RDY3ZTFYQT09&quot;&gt;https://us02web.zoom.us/j/557006550?pwd=eTFJNWszZDZhMGRwOCs4RDY3ZTFYQT09&lt;/a&gt;<br>
<br>
Meeting&nbsp;ID:&nbsp;557&nbsp;006&nbsp;550<br>
Passcode:&nbsp;329513<br>
One&nbsp;tap&nbsp;mobile<br>
+442080806592,,557006550#,,,,*329513#&nbsp;United&nbsp;Kingdom<br>
+443300885830,,557006550#,,,,*329513#&nbsp;United&nbsp;Kingdom<br>
<br>
Dial&nbsp;by&nbsp;your&nbsp;location<br>
       &nbsp;+44&nbsp;208&nbsp;080&nbsp;6592&nbsp;United&nbsp;Kingdom<br>
       &nbsp;+44&nbsp;330&nbsp;088&nbsp;5830&nbsp;United&nbsp;Kingdom<br>
       &nbsp;+44&nbsp;131&nbsp;460&nbsp;1196&nbsp;United&nbsp;Kingdom<br>
       &nbsp;+44&nbsp;203&nbsp;481&nbsp;5237&nbsp;United&nbsp;Kingdom<br>
       &nbsp;+44&nbsp;203&nbsp;481&nbsp;5240&nbsp;United&nbsp;Kingdom<br>
       &nbsp;+44&nbsp;203&nbsp;901&nbsp;7895&nbsp;United&nbsp;Kingdom<br>
       &nbsp;+44&nbsp;208&nbsp;080&nbsp;6591&nbsp;United&nbsp;Kingdom<br>
       &nbsp;+1&nbsp;253&nbsp;215&nbsp;8782&nbsp;US&nbsp;(Tacoma)<br>
       &nbsp;+1&nbsp;301&nbsp;715&nbsp;8592&nbsp;US&nbsp;(Washington&nbsp;DC)<br>
       &nbsp;+1&nbsp;312&nbsp;626&nbsp;6799&nbsp;US&nbsp;(Chicago)<br>
       &nbsp;+1&nbsp;346&nbsp;248&nbsp;7799&nbsp;US&nbsp;(Houston)<br>
       &nbsp;+1&nbsp;646&nbsp;558&nbsp;8656&nbsp;US&nbsp;(New&nbsp;York)<br>
       &nbsp;+1&nbsp;669&nbsp;900&nbsp;9128&nbsp;US&nbsp;(San&nbsp;Jose)<br>
Meeting&nbsp;ID:&nbsp;557&nbsp;006&nbsp;550<br>
Passcode:&nbsp;329513<br>
Find&nbsp;your&nbsp;local&nbsp;number:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://us02web.zoom.us/u/kbsfJcZ8Ql&quot;&gt;https://us02web.zoom.us/u/kbsfJcZ8Ql&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;span&nbsp;class=&quot;JtukPc&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;span&nbsp;class=&quot;JtukPc&quot;&gt;Best&nbsp;wishes&lt;/span&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;span&nbsp;class=&quot;JtukPc&quot;&gt;Paolo&nbsp;Savini&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;span&nbsp;class=&quot;JtukPc&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:5C07640B-0901-4B20-AC13-55934593C4E9@g.hmc.edu&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;<br>
<br>
Thank&nbsp;you!<br>
<br>
David&nbsp;Harris<br>
<br>
<br>
Warning:&nbsp;Compilation&nbsp;of&nbsp;main.c&nbsp;from&nbsp;source&nbsp;directory&nbsp;/home/harris/riscv-wally/addins/embench-iot<br>
/support&nbsp;to&nbsp;binary&nbsp;directory&nbsp;/home/harris/riscv-wally/addins/embench-iot/bd/support&nbsp;failed<br>
Command&nbsp;was:<br>
riscv64-unknown-elf-gcc&nbsp;-I/home/harris/riscv-wally/addins/embench-iot/support&nbsp;-I/home/harris/ris<br>
cv-wally/addins/embench-iot/config/riscv32/boards/ri5cyverilator&nbsp;-I/home/harris/riscv-wally/addi<br>
ns/embench-iot/config/riscv32/chips/generic&nbsp;-I/home/harris/riscv-wally/addins/embench-iot/config<br>
/riscv32&nbsp;-DCPU_MHZ=1&nbsp;-DWARMUP_HEAT=1&nbsp;-o&nbsp;main.o&nbsp;/home/harris/riscv-wally/addins/embench-iot/suppo<br>
rt/main.c<br>
<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;/tmp/cc5hnmDt.o:&nbsp;in&nbsp;function&nbsp;`main':<br>
main.c:(.text+0x12):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`initialise_board'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;main.c:(.text+0x1a):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`initialise_benchmark'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;main.c:(.text+0x24):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`warm_caches'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;main.c:(.text+0x2c):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`start_trigger'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;main.c:(.text+0x34):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`benchmark'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;main.c:(.text+0x42):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`stop_trigger'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;main.c:(.text+0x52):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`verify_benchmark'<br>
collect2:&nbsp;error:&nbsp;ld&nbsp;returned&nbsp;1&nbsp;exit&nbsp;status<br>
<br>
Compilation&nbsp;of&nbsp;benchmark&nbsp;&quot;aha-mont64&quot;&nbsp;successful<br>
Warning:&nbsp;Unable&nbsp;to&nbsp;find&nbsp;support&nbsp;library&nbsp;/home/harris/riscv-wally/addins/embench-iot/bd/support/m<br>
ain.o<br>
Warning:&nbsp;Link&nbsp;of&nbsp;benchmark&nbsp;&quot;aha-mont64&quot;&nbsp;failed<br>
<br>
riscv64-unknown-elf-gcc:&nbsp;fatal&nbsp;error:&nbsp;no&nbsp;input&nbsp;files<br>
compilation&nbsp;terminated.<br>
<br>
In&nbsp;directory&nbsp;&quot;/home/harris/riscv-wally/addins/embench-iot/bd/src/aha-mont64&quot;<br>
Command&nbsp;was:<br>
riscv64-unknown-elf-gcc&nbsp;-o&nbsp;aha-mont64<br>
Warning:&nbsp;Compilation&nbsp;of&nbsp;crc_32.c&nbsp;from&nbsp;source&nbsp;directory&nbsp;/home/harris/riscv-wally/addins/embench-i<br>
ot/src/crc32&nbsp;to&nbsp;binary&nbsp;directory&nbsp;/home/harris/riscv-wally/addins/embench-iot/bd/src/crc32&nbsp;failed<br>
Command&nbsp;was:<br>
riscv64-unknown-elf-gcc&nbsp;-I/home/harris/riscv-wally/addins/embench-iot/support&nbsp;-I/home/harris/ris<br>
cv-wally/addins/embench-iot/config/riscv32/boards/ri5cyverilator&nbsp;-I/home/harris/riscv-wally/addi<br>
ns/embench-iot/config/riscv32/chips/generic&nbsp;-I/home/harris/riscv-wally/addins/embench-iot/config<br>
/riscv32&nbsp;-DCPU_MHZ=1&nbsp;-DWARMUP_HEAT=1&nbsp;-o&nbsp;crc_32.o&nbsp;/home/harris/riscv-wally/addins/embench-iot/src<br>
/crc32/crc_32.c<br>
<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-<br>
unknown-elf/lib/crt0.o:&nbsp;in&nbsp;function&nbsp;`.L0&nbsp;':<br>
(.text+0x38):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`main'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;/tmp/ccQ4pL57.o:&nbsp;in&nbsp;function&nbsp;`.L3':<br>
crc_32.c:(.text+0x16):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`rand_beebs'<br>
/opt/riscv/riscv-gnu-toolchain/lib/gcc/riscv64-unknown-elf/11.1.0/../../../../riscv64-unknown-el<br>
f/bin/ld:&nbsp;/tmp/ccQ4pL57.o:&nbsp;in&nbsp;function&nbsp;`benchmark_body':<br>
crc_32.c:(.text+0xd0):&nbsp;undefined&nbsp;reference&nbsp;to&nbsp;`srand_beebs'<br>
collect2:&nbsp;error:&nbsp;ld&nbsp;returned&nbsp;1&nbsp;exit&nbsp;status<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
